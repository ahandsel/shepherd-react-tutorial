{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __generator = this && this.__generator || function (thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function sent() {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) {\n      try {\n        if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n        if (y = 0, t) op = [op[0] & 2, t.value];\n\n        switch (op[0]) {\n          case 0:\n          case 1:\n            t = op;\n            break;\n\n          case 4:\n            _.label++;\n            return {\n              value: op[1],\n              done: false\n            };\n\n          case 5:\n            _.label++;\n            y = op[1];\n            op = [0];\n            continue;\n\n          case 7:\n            op = _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n\n          default:\n            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n              _ = 0;\n              continue;\n            }\n\n            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n              _.label = op[1];\n              break;\n            }\n\n            if (op[0] === 6 && _.label < t[1]) {\n              _.label = t[1];\n              t = op;\n              break;\n            }\n\n            if (t && _.label < t[2]) {\n              _.label = t[2];\n\n              _.ops.push(op);\n\n              break;\n            }\n\n            if (t[2]) _.ops.pop();\n\n            _.trys.pop();\n\n            continue;\n        }\n\n        op = body.call(thisArg, _);\n      } catch (e) {\n        op = [6, e];\n        y = 0;\n      } finally {\n        f = t = 0;\n      }\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RecordClient = void 0;\n\nvar url_1 = require(\"./../url\");\n\nvar KintoneAllRecordsError_1 = require(\"../error/KintoneAllRecordsError\");\n\nvar ADD_RECORDS_LIMIT = 100;\nvar UPDATE_RECORDS_LIMIT = 100;\nvar DELETE_RECORDS_LIMIT = 100;\n\nvar RecordClient =\n/** @class */\nfunction () {\n  function RecordClient(client, bulkRequestClient, guestSpaceId) {\n    this.client = client;\n    this.bulkRequestClient = bulkRequestClient;\n    this.guestSpaceId = guestSpaceId;\n    this.didWarnMaximumOffsetValue = false;\n  }\n\n  RecordClient.prototype.getRecord = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"record\"\n    });\n    return this.client.get(path, params);\n  };\n\n  RecordClient.prototype.addRecord = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"record\"\n    });\n    return this.client.post(path, params);\n  };\n\n  RecordClient.prototype.updateRecord = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"record\"\n    });\n    return this.client.put(path, params);\n  };\n\n  RecordClient.prototype.upsertRecord = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      var app, updateKey, record, records, revision;\n\n      var _a;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            app = params.app, updateKey = params.updateKey, record = params.record;\n            return [4\n            /*yield*/\n            , this.getRecords({\n              app: app,\n              query: \"\".concat(updateKey.field, \" = \\\"\").concat(updateKey.value, \"\\\"\")\n            })];\n\n          case 1:\n            records = _b.sent().records;\n            if (!(records.length > 0)) return [3\n            /*break*/\n            , 4];\n            if (!(records[0].$id.type === \"__ID__\")) return [3\n            /*break*/\n            , 3];\n            return [4\n            /*yield*/\n            , this.updateRecord(params)];\n\n          case 2:\n            revision = _b.sent().revision;\n            return [2\n            /*return*/\n            , {\n              id: records[0].$id.value,\n              revision: revision\n            }];\n\n          case 3:\n            throw new Error(\"Missing `$id` in `getRecords` response. This error is likely caused by a bug in Kintone REST API Client. Please file an issue.\");\n\n          case 4:\n            return [2\n            /*return*/\n            , this.addRecord({\n              app: app,\n              record: Object.assign({}, record, (_a = {}, _a[updateKey.field] = {\n                value: updateKey.value\n              }, _a))\n            })];\n        }\n      });\n    });\n  }; // TODO: `records` type in return type should be filtered by `fields`.\n\n\n  RecordClient.prototype.getRecords = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      var path, response;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            path = this.buildPathWithGuestSpaceId({\n              endpointName: \"records\"\n            });\n            return [4\n            /*yield*/\n            , this.client.get(path, params)];\n\n          case 1:\n            response = _a.sent();\n            this.warnMaximumOffsetValueIfNeeded(params.query);\n            return [2\n            /*return*/\n            , response];\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.warnMaximumOffsetValueIfNeeded = function (query) {\n    if (query) {\n      var regexp = /offset\\s+(\\d+)/i;\n      var result = query.match(regexp);\n\n      if (!this.didWarnMaximumOffsetValue && result && Number(result[1]) > 10000) {\n        this.didWarnMaximumOffsetValue = true;\n        console.warn(\"Warning: The maximum offset value will be limited to 10,000 in the future. Please use `createCursor()` and `getRecordsByCursor()` instead.\");\n      }\n    }\n  };\n\n  RecordClient.prototype.addRecords = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      var path, _a, ids, revisions;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            path = this.buildPathWithGuestSpaceId({\n              endpointName: \"records\"\n            });\n            return [4\n            /*yield*/\n            , this.client.post(path, params)];\n\n          case 1:\n            _a = _b.sent(), ids = _a.ids, revisions = _a.revisions;\n            return [2\n            /*return*/\n            , {\n              ids: ids,\n              revisions: revisions,\n              records: ids.map(function (id, i) {\n                return {\n                  id: id,\n                  revision: revisions[i]\n                };\n              })\n            }];\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.updateRecords = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"records\"\n    });\n    return this.client.put(path, params);\n  };\n\n  RecordClient.prototype.deleteRecords = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"records\"\n    });\n    return this.client.delete(path, params);\n  };\n\n  RecordClient.prototype.createCursor = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"records/cursor\"\n    });\n    return this.client.post(path, params);\n  };\n\n  RecordClient.prototype.getRecordsByCursor = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"records/cursor\"\n    });\n    return this.client.get(path, params);\n  };\n\n  RecordClient.prototype.deleteCursor = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"records/cursor\"\n    });\n    return this.client.delete(path, params);\n  };\n\n  RecordClient.prototype.getAllRecords = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      var condition, orderBy, _a, withCursor, rest, conditionQuery, query;\n\n      return __generator(this, function (_b) {\n        condition = params.condition, orderBy = params.orderBy, _a = params.withCursor, withCursor = _a === void 0 ? true : _a, rest = __rest(params, [\"condition\", \"orderBy\", \"withCursor\"]);\n\n        if (!orderBy) {\n          return [2\n          /*return*/\n          , this.getAllRecordsWithId(__assign(__assign({}, rest), {\n            condition: condition\n          }))];\n        }\n\n        if (withCursor) {\n          conditionQuery = condition ? \"\".concat(condition, \" \") : \"\";\n          query = \"\".concat(conditionQuery).concat(orderBy ? \"order by \".concat(orderBy) : \"\");\n          return [2\n          /*return*/\n          , this.getAllRecordsWithCursor(__assign(__assign({}, rest), {\n            query: query\n          }))];\n        }\n\n        return [2\n        /*return*/\n        , this.getAllRecordsWithOffset(__assign(__assign({}, rest), {\n          orderBy: orderBy,\n          condition: condition\n        }))];\n      });\n    });\n  };\n\n  RecordClient.prototype.getAllRecordsWithId = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      var originalFields, rest, fields;\n      return __generator(this, function (_a) {\n        originalFields = params.fields, rest = __rest(params, [\"fields\"]);\n        fields = originalFields; // Append $id if $id doesn't exist in fields\n\n        if (fields && fields.length > 0 && fields.indexOf(\"$id\") === -1) {\n          fields = __spreadArray(__spreadArray([], fields, true), [\"$id\"], false);\n        }\n\n        return [2\n        /*return*/\n        , this.getAllRecordsRecursiveWithId(__assign(__assign({}, rest), {\n          fields: fields\n        }), \"0\", [])];\n      });\n    });\n  };\n\n  RecordClient.prototype.getAllRecordsRecursiveWithId = function (params, id, records) {\n    return __awaiter(this, void 0, void 0, function () {\n      var GET_RECORDS_LIMIT, condition, rest, conditionQuery, query, result, allRecords, lastRecord, lastId;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            GET_RECORDS_LIMIT = 500;\n            condition = params.condition, rest = __rest(params, [\"condition\"]);\n            conditionQuery = condition ? \"(\".concat(condition, \") and \") : \"\";\n            query = \"\".concat(conditionQuery, \"$id > \").concat(id, \" order by $id asc limit \").concat(GET_RECORDS_LIMIT);\n            return [4\n            /*yield*/\n            , this.getRecords(__assign(__assign({}, rest), {\n              query: query\n            }))];\n\n          case 1:\n            result = _a.sent();\n            allRecords = records.concat(result.records);\n\n            if (result.records.length < GET_RECORDS_LIMIT) {\n              return [2\n              /*return*/\n              , allRecords];\n            }\n\n            lastRecord = result.records[result.records.length - 1];\n\n            if (lastRecord.$id.type === \"__ID__\") {\n              lastId = lastRecord.$id.value;\n              return [2\n              /*return*/\n              , this.getAllRecordsRecursiveWithId(params, lastId, allRecords)];\n            }\n\n            throw new Error(\"Missing `$id` in `getRecords` response. This error is likely caused by a bug in Kintone REST API Client. Please file an issue.\");\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.getAllRecordsWithOffset = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this.getAllRecordsRecursiveWithOffset(params, 0, [])];\n      });\n    });\n  };\n\n  RecordClient.prototype.getAllRecordsRecursiveWithOffset = function (params, offset, records) {\n    return __awaiter(this, void 0, void 0, function () {\n      var GET_RECORDS_LIMIT, condition, orderBy, rest, conditionQuery, query, result, allRecords;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            GET_RECORDS_LIMIT = 500;\n            condition = params.condition, orderBy = params.orderBy, rest = __rest(params, [\"condition\", \"orderBy\"]);\n            conditionQuery = condition ? \"\".concat(condition, \" \") : \"\";\n            query = \"\".concat(conditionQuery).concat(orderBy ? \"order by \".concat(orderBy, \" \") : \"\", \"limit \").concat(GET_RECORDS_LIMIT, \" offset \").concat(offset);\n            return [4\n            /*yield*/\n            , this.getRecords(__assign(__assign({}, rest), {\n              query: query\n            }))];\n\n          case 1:\n            result = _a.sent();\n            allRecords = records.concat(result.records);\n\n            if (result.records.length < GET_RECORDS_LIMIT) {\n              return [2\n              /*return*/\n              , allRecords];\n            }\n\n            return [2\n            /*return*/\n            , this.getAllRecordsRecursiveWithOffset(params, offset + GET_RECORDS_LIMIT, allRecords)];\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.getAllRecordsWithCursor = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      var id, error_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.createCursor(params)];\n\n          case 1:\n            id = _a.sent().id;\n            _a.label = 2;\n\n          case 2:\n            _a.trys.push([2, 4,, 6]);\n\n            return [4\n            /*yield*/\n            , this.getAllRecordsRecursiveByCursor(id, [])];\n\n          case 3:\n            return [2\n            /*return*/\n            , _a.sent()];\n\n          case 4:\n            error_1 = _a.sent();\n            return [4\n            /*yield*/\n            , this.deleteCursor({\n              id: id\n            })];\n\n          case 5:\n            _a.sent();\n\n            throw error_1;\n\n          case 6:\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.getAllRecordsRecursiveByCursor = function (id, records) {\n    return __awaiter(this, void 0, void 0, function () {\n      var result, allRecords;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getRecordsByCursor({\n              id: id\n            })];\n\n          case 1:\n            result = _a.sent();\n            allRecords = records.concat(result.records);\n\n            if (result.next) {\n              return [2\n              /*return*/\n              , this.getAllRecordsRecursiveByCursor(id, allRecords)];\n            }\n\n            return [2\n            /*return*/\n            , allRecords];\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.addAllRecords = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        if (!params.records.every(function (record) {\n          return !Array.isArray(record) && record instanceof Object;\n        })) {\n          throw new Error(\"the `records` parameter must be an array of object.\");\n        }\n\n        return [2\n        /*return*/\n        , this.addAllRecordsRecursive(params, params.records.length, [])];\n      });\n    });\n  };\n\n  RecordClient.prototype.addAllRecordsRecursive = function (params, numOfAllRecords, results) {\n    return __awaiter(this, void 0, void 0, function () {\n      var CHUNK_LENGTH, app, records, recordsChunk, newResults, e_1;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            CHUNK_LENGTH = this.bulkRequestClient.REQUESTS_LENGTH_LIMIT * ADD_RECORDS_LIMIT;\n            app = params.app, records = params.records;\n            recordsChunk = records.slice(0, CHUNK_LENGTH);\n\n            if (recordsChunk.length === 0) {\n              return [2\n              /*return*/\n              , {\n                records: results\n              }];\n            }\n\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , this.addAllRecordsWithBulkRequest({\n              app: app,\n              records: recordsChunk\n            })];\n\n          case 2:\n            newResults = _a.sent();\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            e_1 = _a.sent();\n            throw new KintoneAllRecordsError_1.KintoneAllRecordsError({\n              records: results\n            }, records, numOfAllRecords, e_1, ADD_RECORDS_LIMIT);\n\n          case 4:\n            return [2\n            /*return*/\n            , this.addAllRecordsRecursive({\n              app: app,\n              records: records.slice(CHUNK_LENGTH)\n            }, numOfAllRecords, results.concat(newResults))];\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.addAllRecordsWithBulkRequest = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      var separatedRecords, requests, results;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            separatedRecords = this.separateArrayRecursive(ADD_RECORDS_LIMIT, [], params.records);\n            requests = separatedRecords.map(function (records) {\n              return {\n                method: \"POST\",\n                endpointName: \"records\",\n                payload: {\n                  app: params.app,\n                  records: records\n                }\n              };\n            });\n            return [4\n            /*yield*/\n            , this.bulkRequestClient.send({\n              requests: requests\n            })];\n\n          case 1:\n            results = _a.sent().results;\n            return [2\n            /*return*/\n            , results.map(function (result) {\n              var ids = result.ids,\n                  revisions = result.revisions;\n              return ids.map(function (id, i) {\n                return {\n                  id: id,\n                  revision: revisions[i]\n                };\n              });\n            }).reduce(function (acc, records) {\n              return acc.concat(records);\n            }, [])];\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.updateAllRecords = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , this.updateAllRecordsRecursive(params, params.records.length, [])];\n      });\n    });\n  };\n\n  RecordClient.prototype.updateAllRecordsRecursive = function (params, numOfAllRecords, results) {\n    return __awaiter(this, void 0, void 0, function () {\n      var CHUNK_LENGTH, app, records, recordsChunk, newResults, e_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            CHUNK_LENGTH = this.bulkRequestClient.REQUESTS_LENGTH_LIMIT * UPDATE_RECORDS_LIMIT;\n            app = params.app, records = params.records;\n            recordsChunk = records.slice(0, CHUNK_LENGTH);\n\n            if (recordsChunk.length === 0) {\n              return [2\n              /*return*/\n              , {\n                records: results\n              }];\n            }\n\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , this.updateAllRecordsWithBulkRequest({\n              app: app,\n              records: recordsChunk\n            })];\n\n          case 2:\n            newResults = _a.sent();\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            e_2 = _a.sent();\n            throw new KintoneAllRecordsError_1.KintoneAllRecordsError({\n              records: results\n            }, records, numOfAllRecords, e_2, UPDATE_RECORDS_LIMIT);\n\n          case 4:\n            return [2\n            /*return*/\n            , this.updateAllRecordsRecursive({\n              app: app,\n              records: records.slice(CHUNK_LENGTH)\n            }, numOfAllRecords, results.concat(newResults))];\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.updateAllRecordsWithBulkRequest = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      var separatedRecords, requests, results;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            separatedRecords = this.separateArrayRecursive(UPDATE_RECORDS_LIMIT, [], params.records);\n            requests = separatedRecords.map(function (records) {\n              return {\n                method: \"PUT\",\n                endpointName: \"records\",\n                payload: {\n                  app: params.app,\n                  records: records\n                }\n              };\n            });\n            return [4\n            /*yield*/\n            , this.bulkRequestClient.send({\n              requests: requests\n            })];\n\n          case 1:\n            results = _a.sent().results;\n            return [2\n            /*return*/\n            , results.map(function (result) {\n              return result.records;\n            }).reduce(function (acc, records) {\n              return acc.concat(records);\n            }, [])];\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.deleteAllRecords = function (params) {\n    return this.deleteAllRecordsRecursive(params, params.records.length);\n  };\n\n  RecordClient.prototype.deleteAllRecordsRecursive = function (params, numOfAllRecords) {\n    return __awaiter(this, void 0, void 0, function () {\n      var CHUNK_LENGTH, app, records, recordsChunk, e_3;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            CHUNK_LENGTH = this.bulkRequestClient.REQUESTS_LENGTH_LIMIT * DELETE_RECORDS_LIMIT;\n            app = params.app, records = params.records;\n            recordsChunk = records.slice(0, CHUNK_LENGTH);\n\n            if (recordsChunk.length === 0) {\n              return [2\n              /*return*/\n              , {}];\n            }\n\n            _a.label = 1;\n\n          case 1:\n            _a.trys.push([1, 3,, 4]);\n\n            return [4\n            /*yield*/\n            , this.deleteAllRecordsWithBulkRequest({\n              app: app,\n              records: recordsChunk\n            })];\n\n          case 2:\n            _a.sent();\n\n            return [3\n            /*break*/\n            , 4];\n\n          case 3:\n            e_3 = _a.sent();\n            throw new KintoneAllRecordsError_1.KintoneAllRecordsError({}, records, numOfAllRecords, e_3, DELETE_RECORDS_LIMIT);\n\n          case 4:\n            return [2\n            /*return*/\n            , this.deleteAllRecordsRecursive({\n              app: app,\n              records: records.slice(CHUNK_LENGTH)\n            }, numOfAllRecords)];\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.deleteAllRecordsWithBulkRequest = function (params) {\n    return __awaiter(this, void 0, void 0, function () {\n      var separatedRecords, requests;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            separatedRecords = this.separateArrayRecursive(DELETE_RECORDS_LIMIT, [], params.records);\n            requests = separatedRecords.map(function (records) {\n              return {\n                method: \"DELETE\",\n                endpointName: \"records\",\n                payload: {\n                  app: params.app,\n                  ids: records.map(function (record) {\n                    return record.id;\n                  }),\n                  revisions: records.map(function (record) {\n                    return record.revision;\n                  })\n                }\n              };\n            });\n            return [4\n            /*yield*/\n            , this.bulkRequestClient.send({\n              requests: requests\n            })];\n\n          case 1:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  RecordClient.prototype.separateArrayRecursive = function (size, separated, array) {\n    var chunk = array.slice(0, size);\n\n    if (chunk.length === 0) {\n      return separated;\n    }\n\n    return this.separateArrayRecursive(size, __spreadArray(__spreadArray([], separated, true), [chunk], false), array.slice(size));\n  };\n\n  RecordClient.prototype.addRecordComment = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"record/comment\"\n    });\n    return this.client.post(path, params);\n  };\n\n  RecordClient.prototype.deleteRecordComment = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"record/comment\"\n    });\n    return this.client.delete(path, params);\n  };\n\n  RecordClient.prototype.getRecordComments = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"record/comments\"\n    });\n    return this.client.get(path, params);\n  };\n\n  RecordClient.prototype.updateRecordAssignees = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"record/assignees\"\n    });\n    return this.client.put(path, params);\n  };\n\n  RecordClient.prototype.updateRecordStatus = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"record/status\"\n    });\n    return this.client.put(path, params);\n  };\n\n  RecordClient.prototype.updateRecordsStatus = function (params) {\n    var path = this.buildPathWithGuestSpaceId({\n      endpointName: \"records/status\"\n    });\n    return this.client.put(path, params);\n  };\n\n  RecordClient.prototype.buildPathWithGuestSpaceId = function (params) {\n    return (0, url_1.buildPath)(__assign(__assign({}, params), {\n      guestSpaceId: this.guestSpaceId\n    }));\n  };\n\n  return RecordClient;\n}();\n\nexports.RecordClient = RecordClient;","map":{"version":3,"mappings":"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","names":["ADD_RECORDS_LIMIT","UPDATE_RECORDS_LIMIT","DELETE_RECORDS_LIMIT","client","bulkRequestClient","guestSpaceId","didWarnMaximumOffsetValue","RecordClient","params","path","buildPathWithGuestSpaceId","endpointName","get","post","put","app","updateKey","record","getRecords","query","field","concat","value","records","_b","length","$id","type","updateRecord","revision","id","Error","addRecord","Object","assign","_a","response","warnMaximumOffsetValueIfNeeded","regexp","result","match","Number","console","warn","ids","revisions","map","i","delete","condition","orderBy","withCursor","rest","getAllRecordsWithId","__assign","conditionQuery","getAllRecordsWithCursor","getAllRecordsWithOffset","originalFields","fields","indexOf","getAllRecordsRecursiveWithId","GET_RECORDS_LIMIT","allRecords","lastRecord","lastId","getAllRecordsRecursiveWithOffset","offset","createCursor","getAllRecordsRecursiveByCursor","deleteCursor","error_1","getRecordsByCursor","next","every","Array","isArray","addAllRecordsRecursive","numOfAllRecords","results","CHUNK_LENGTH","REQUESTS_LENGTH_LIMIT","recordsChunk","slice","addAllRecordsWithBulkRequest","newResults","KintoneAllRecordsError_1","e_1","separatedRecords","separateArrayRecursive","requests","method","payload","send","reduce","acc","updateAllRecordsRecursive","updateAllRecordsWithBulkRequest","e_2","deleteAllRecordsRecursive","deleteAllRecordsWithBulkRequest","e_3","size","separated","array","chunk","__spreadArray","exports"],"sources":["../../src/client/RecordClient.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}