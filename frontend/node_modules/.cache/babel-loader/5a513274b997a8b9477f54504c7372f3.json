{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KintoneAllRecordsError = void 0;\n\nvar KintoneAllRecordsError =\n/** @class */\nfunction (_super) {\n  __extends(KintoneAllRecordsError, _super);\n\n  function KintoneAllRecordsError(processedRecordsResult, unprocessedRecords, numOfAllRecords, error, chunkLength) {\n    var _this = this;\n\n    var numOfProcessedRecords = numOfAllRecords - unprocessedRecords.length;\n    var errorIndex = KintoneAllRecordsError.extractErrorIndex(numOfProcessedRecords, error, chunkLength);\n    var message = KintoneAllRecordsError.buildErrorMessage(numOfProcessedRecords, numOfAllRecords, errorIndex);\n    _this = _super.call(this, message) || this;\n    _this.name = \"KintoneAllRecordsError\";\n    _this.processedRecordsResult = processedRecordsResult;\n    _this.unprocessedRecords = unprocessedRecords;\n    _this.error = error;\n    _this.errorIndex = errorIndex;\n    _this.message = message; // https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    // Set the prototype explicitly.\n\n    Object.setPrototypeOf(_this, KintoneAllRecordsError.prototype);\n    return _this;\n  }\n\n  KintoneAllRecordsError.parseErrorIndex = function (errors) {\n    var firstErrorKey = Object.keys(errors)[0];\n    var result = firstErrorKey.match(/records\\[(\\d+)\\]/);\n    return result ? Number(result[1]) : null;\n  };\n\n  KintoneAllRecordsError.extractErrorIndex = function (numOfProcessedRecords, error, chunkLength) {\n    if (error.bulkRequestIndex !== undefined && error.errors) {\n      var errorParseResult = KintoneAllRecordsError.parseErrorIndex(error.errors);\n\n      if (errorParseResult !== null) {\n        return numOfProcessedRecords + error.bulkRequestIndex * chunkLength + errorParseResult;\n      }\n    }\n\n    return undefined;\n  };\n\n  KintoneAllRecordsError.buildErrorMessage = function (numOfProcessedRecords, numOfAllRecords, errorIndex) {\n    var message = \"\";\n\n    if (errorIndex !== undefined) {\n      message = \"An error occurred at records[\".concat(errorIndex, \"]. \");\n    }\n\n    message += \"\".concat(numOfProcessedRecords, \"/\").concat(numOfAllRecords, \" records are processed successfully\");\n    return message;\n  };\n\n  return KintoneAllRecordsError;\n}(Error);\n\nexports.KintoneAllRecordsError = KintoneAllRecordsError;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AAAA;AAAA;EAA4CA;;EA8C1C,gCACEC,sBADF,EAEEC,kBAFF,EAGEC,eAHF,EAIEC,KAJF,EAKEC,WALF,EAKqB;IALrB;;IAOE,IAAMC,qBAAqB,GAAGH,eAAe,GAAGD,kBAAkB,CAACK,MAAnE;IAEA,IAAMC,UAAU,GAAGC,sBAAsB,CAACC,iBAAvB,CACjBJ,qBADiB,EAEjBF,KAFiB,EAGjBC,WAHiB,CAAnB;IAMA,IAAMM,OAAO,GAAGF,sBAAsB,CAACG,iBAAvB,CACdN,qBADc,EAEdH,eAFc,EAGdK,UAHc,CAAhB;YAKAK,kBAAMF,OAAN,KAAc;IAEdG,KAAI,CAACC,IAAL,GAAY,wBAAZ;IACAD,KAAI,CAACb,sBAAL,GAA8BA,sBAA9B;IACAa,KAAI,CAACZ,kBAAL,GAA0BA,kBAA1B;IACAY,KAAI,CAACV,KAAL,GAAaA,KAAb;IACAU,KAAI,CAACN,UAAL,GAAkBA,UAAlB;IACAM,KAAI,CAACH,OAAL,GAAeA,OAAf,CAtBmB,CAwBnB;IACA;;IACAK,MAAM,CAACC,cAAP,CAAsBH,KAAtB,EAA4BL,sBAAsB,CAACS,SAAnD;;EACD;;EAxEcT,yCAAf,UAA+BU,MAA/B,EAA2D;IACzD,IAAMC,aAAa,GAAGJ,MAAM,CAACK,IAAP,CAAYF,MAAZ,EAAoB,CAApB,CAAtB;IACA,IAAMG,MAAM,GAAGF,aAAa,CAACG,KAAd,CAAoB,kBAApB,CAAf;IACA,OAAOD,MAAM,GAAGE,MAAM,CAACF,MAAM,CAAC,CAAD,CAAP,CAAT,GAAuB,IAApC;EACD,CAJc;;EAMAb,2CAAf,UACEH,qBADF,EAEEF,KAFF,EAGEC,WAHF,EAGqB;IAEnB,IAAID,KAAK,CAACqB,gBAAN,KAA2BC,SAA3B,IAAwCtB,KAAK,CAACe,MAAlD,EAA0D;MACxD,IAAMQ,gBAAgB,GAAGlB,sBAAsB,CAACmB,eAAvB,CACvBxB,KAAK,CAACe,MADiB,CAAzB;;MAGA,IAAIQ,gBAAgB,KAAK,IAAzB,EAA+B;QAC7B,OACErB,qBAAqB,GACrBF,KAAK,CAACqB,gBAAN,GAAyBpB,WADzB,GAEAsB,gBAHF;MAKD;IACF;;IACD,OAAOD,SAAP;EACD,CAlBc;;EAoBAjB,2CAAf,UACEH,qBADF,EAEEH,eAFF,EAGEK,UAHF,EAGgC;IAE9B,IAAIG,OAAO,GAAG,EAAd;;IACA,IAAIH,UAAU,KAAKkB,SAAnB,EAA8B;MAC5Bf,OAAO,GAAG,uCAAgCH,UAAhC,EAA0C,KAA1C,CAAV;IACD;;IACDG,OAAO,IAAI,UAAGL,qBAAH,EAAwB,GAAxB,EAAwBuB,MAAxB,CAA4B1B,eAA5B,EAA2C,qCAA3C,CAAX;IAEA,OAAOQ,OAAP;EACD,CAZc;;EA+CjB;AAAC,CA/ED,CAA4CmB,KAA5C;;AAAaC","names":["__extends","processedRecordsResult","unprocessedRecords","numOfAllRecords","error","chunkLength","numOfProcessedRecords","length","errorIndex","KintoneAllRecordsError","extractErrorIndex","message","buildErrorMessage","_super","_this","name","Object","setPrototypeOf","prototype","errors","firstErrorKey","keys","result","match","Number","bulkRequestIndex","undefined","errorParseResult","parseErrorIndex","concat","Error","exports"],"sources":["../../src/error/KintoneAllRecordsError.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}