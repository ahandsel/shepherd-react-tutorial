{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.KintoneRestAPIClient = void 0;\n\nvar BulkRequestClient_1 = require(\"./client/BulkRequestClient\");\n\nvar AppClient_1 = require(\"./client/AppClient\");\n\nvar RecordClient_1 = require(\"./client/RecordClient\");\n\nvar FileClient_1 = require(\"./client/FileClient\");\n\nvar http_1 = require(\"./http/\");\n\nvar KintoneRequestConfigBuilder_1 = require(\"./KintoneRequestConfigBuilder\");\n\nvar KintoneResponseHandler_1 = require(\"./KintoneResponseHandler\");\n\nvar platform_1 = require(\"./platform\");\n\nvar UnsupportedPlatformError_1 = require(\"./platform/UnsupportedPlatformError\");\n\nvar buildDiscriminatedAuth = function (auth) {\n  if (\"username\" in auth) {\n    return __assign({\n      type: \"password\"\n    }, auth);\n  }\n\n  if (\"apiToken\" in auth) {\n    return __assign({\n      type: \"apiToken\"\n    }, auth);\n  }\n\n  if (\"oAuthToken\" in auth) {\n    return __assign({\n      type: \"oAuthToken\"\n    }, auth);\n  }\n\n  try {\n    return platform_1.platformDeps.getDefaultAuth();\n  } catch (e) {\n    if (e instanceof UnsupportedPlatformError_1.UnsupportedPlatformError) {\n      throw new Error(\"session authentication is not supported in \".concat(e.platform, \" environment.\"));\n    }\n\n    throw e;\n  }\n};\n\nvar KintoneRestAPIClient =\n/** @class */\nfunction () {\n  function KintoneRestAPIClient(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _a, _b, _c;\n\n    validateOptions(options);\n    this.baseUrl = platform_1.platformDeps.buildBaseUrl(options.baseUrl).replace(/\\/+$/, \"\"); // Remove trailing slash\n\n    var auth = buildDiscriminatedAuth((_a = options.auth) !== null && _a !== void 0 ? _a : {});\n    var requestConfigBuilder = new KintoneRequestConfigBuilder_1.KintoneRequestConfigBuilder(__assign(__assign({}, options), {\n      baseUrl: this.baseUrl,\n      auth: auth\n    }));\n    var responseHandler = new KintoneResponseHandler_1.KintoneResponseHandler({\n      enableAbortSearchError: (_c = (_b = options.featureFlags) === null || _b === void 0 ? void 0 : _b.enableAbortSearchError) !== null && _c !== void 0 ? _c : false\n    });\n    var httpClient = new http_1.DefaultHttpClient({\n      responseHandler: responseHandler,\n      requestConfigBuilder: requestConfigBuilder\n    });\n    var guestSpaceId = options.guestSpaceId;\n    this.bulkRequest_ = new BulkRequestClient_1.BulkRequestClient(httpClient, guestSpaceId);\n    this.record = new RecordClient_1.RecordClient(httpClient, this.bulkRequest_, guestSpaceId);\n    this.app = new AppClient_1.AppClient(httpClient, guestSpaceId);\n    this.file = new FileClient_1.FileClient(httpClient, guestSpaceId);\n  }\n\n  Object.defineProperty(KintoneRestAPIClient, \"version\", {\n    get: function () {\n      return platform_1.platformDeps.getVersion();\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  KintoneRestAPIClient.prototype.getBaseUrl = function () {\n    return this.baseUrl;\n  };\n\n  KintoneRestAPIClient.prototype.bulkRequest = function (params) {\n    return this.bulkRequest_.send(params);\n  };\n\n  return KintoneRestAPIClient;\n}();\n\nexports.KintoneRestAPIClient = KintoneRestAPIClient;\n\nvar validateOptions = function (options) {\n  validateBaseUrl(options.baseUrl);\n  validateGuestSpaceId(options.guestSpaceId);\n};\n\nvar validateBaseUrl = function (baseUrl) {\n  if (baseUrl === undefined) {\n    return;\n  }\n\n  var url = new URL(baseUrl);\n\n  if (url.hostname !== \"localhost\" && url.protocol !== \"https:\") {\n    throw new Error('The protocol of baseUrl must be \"https\".');\n  }\n};\n\nvar validateGuestSpaceId = function (guestSpaceId) {\n  if (guestSpaceId === \"\" || guestSpaceId === null) {\n    throw new Error(\"invalid guestSpaceId: got [\".concat(guestSpaceId, \"]\"));\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AA4BA,IAAMA,sBAAsB,GAAG,UAACC,IAAD,EAAW;EACxC,IAAI,cAAcA,IAAlB,EAAwB;IACtB;MAASC,IAAI,EAAE;IAAf,GAA8BD,IAA9B;EACD;;EACD,IAAI,cAAcA,IAAlB,EAAwB;IACtB;MAASC,IAAI,EAAE;IAAf,GAA8BD,IAA9B;EACD;;EACD,IAAI,gBAAgBA,IAApB,EAA0B;IACxB;MAASC,IAAI,EAAE;IAAf,GAAgCD,IAAhC;EACD;;EACD,IAAI;IACF,OAAOE,wBAAaC,cAAb,EAAP;EACD,CAFD,CAEE,OAAOC,CAAP,EAAU;IACV,IAAIA,CAAC,YAAYC,mDAAjB,EAA2C;MACzC,MAAM,IAAIC,KAAJ,CACJ,qDAA8CF,CAAC,CAACG,QAAhD,EAAwD,eAAxD,CADI,CAAN;IAGD;;IACD,MAAMH,CAAN;EACD;AACF,CApBD;;AAsBA;AAAA;AAAA;EAOE,8BAAYI,OAAZ,EAAiC;IAArB;MAAAA;IAAqB;;;;IAC/BC,eAAe,CAACD,OAAD,CAAf;IAEA,KAAKE,OAAL,GAAeR,wBACZS,YADY,CACCH,OAAO,CAACE,OADT,EAEZE,OAFY,CAEJ,MAFI,EAEI,EAFJ,CAAf,CAH+B,CAKP;;IAExB,IAAMZ,IAAI,GAAGD,sBAAsB,CAAC,aAAO,CAACC,IAAR,MAAY,IAAZ,IAAYa,aAAZ,GAAYA,EAAZ,GAAgB,EAAjB,CAAnC;IACA,IAAMC,oBAAoB,GAAG,IAAIC,yDAAJ,CAA+BC,sBACvDR,OADuD,GAChD;MACVE,OAAO,EAAE,KAAKA,OADJ;MAEVV,IAAI;IAFM,CADgD,CAA/B,CAA7B;IAKA,IAAMiB,eAAe,GAAG,IAAIC,+CAAJ,CAA2B;MACjDC,sBAAsB,EACpB,mBAAO,CAACC,YAAR,MAAoB,IAApB,IAAoBC,aAApB,GAAoB,MAApB,GAAoBA,GAAEF,sBAAtB,MAA4C,IAA5C,IAA4CG,aAA5C,GAA4CA,EAA5C,GAAgD;IAFD,CAA3B,CAAxB;IAIA,IAAMC,UAAU,GAAG,IAAIC,wBAAJ,CAAsB;MACvCP,eAAe,iBADwB;MAEvCH,oBAAoB;IAFmB,CAAtB,CAAnB;IAIQ,gBAAY,GAAKN,OAAO,aAAxB;IAER,KAAKiB,YAAL,GAAoB,IAAIC,qCAAJ,CAAsBH,UAAtB,EAAkCI,YAAlC,CAApB;IACA,KAAKC,MAAL,GAAc,IAAIC,2BAAJ,CAAiBN,UAAjB,EAA6B,KAAKE,YAAlC,EAAgDE,YAAhD,CAAd;IACA,KAAKG,GAAL,GAAW,IAAIC,qBAAJ,CAAcR,UAAd,EAA0BI,YAA1B,CAAX;IACA,KAAKK,IAAL,GAAY,IAAIC,uBAAJ,CAAeV,UAAf,EAA2BI,YAA3B,CAAZ;EACD;;EAEDO,sBAAkBC,oBAAlB,EAAkB,SAAlB,EAAyB;SAAzB;MACE,OAAOjC,wBAAakC,UAAb,EAAP;IACD,CAFwB;qBAAA;;EAAA,CAAzB;;EAIOD,4CAAP;IACE,OAAO,KAAKzB,OAAZ;EACD,CAFM;;EAIAyB,6CAAP,UAAmBE,MAAnB,EAaC;IACC,OAAO,KAAKZ,YAAL,CAAkBa,IAAlB,CAAuBD,MAAvB,CAAP;EACD,CAfM;;EAgBT;AAAC,CA5DD;;AAAaE;;AA8Db,IAAM9B,eAAe,GAAG,UAACD,OAAD,EAAiB;EACvCgC,eAAe,CAAChC,OAAO,CAACE,OAAT,CAAf;EACA+B,oBAAoB,CAACjC,OAAO,CAACmB,YAAT,CAApB;AACD,CAHD;;AAKA,IAAMa,eAAe,GAAG,UAAC9B,OAAD,EAA4B;EAClD,IAAIA,OAAO,KAAKgC,SAAhB,EAA2B;IACzB;EACD;;EAED,IAAMC,GAAG,GAAG,IAAIC,GAAJ,CAAQlC,OAAR,CAAZ;;EACA,IAAIiC,GAAG,CAACE,QAAJ,KAAiB,WAAjB,IAAgCF,GAAG,CAACG,QAAJ,KAAiB,QAArD,EAA+D;IAC7D,MAAM,IAAIxC,KAAJ,CAAU,0CAAV,CAAN;EACD;AACF,CATD;;AAWA,IAAMmC,oBAAoB,GAAG,UAACd,YAAD,EAAsC;EACjE,IAAIA,YAAY,KAAK,EAAjB,IAAuBA,YAAY,KAAK,IAA5C,EAAkD;IAChD,MAAM,IAAIrB,KAAJ,CAAU,qCAA8BqB,YAA9B,EAA0C,GAA1C,CAAV,CAAN;EACD;AACF,CAJD","names":["buildDiscriminatedAuth","auth","type","platform_1","getDefaultAuth","e","UnsupportedPlatformError_1","Error","platform","options","validateOptions","baseUrl","buildBaseUrl","replace","_a","requestConfigBuilder","KintoneRequestConfigBuilder_1","__assign","responseHandler","KintoneResponseHandler_1","enableAbortSearchError","featureFlags","_b","_c","httpClient","http_1","bulkRequest_","BulkRequestClient_1","guestSpaceId","record","RecordClient_1","app","AppClient_1","file","FileClient_1","Object","KintoneRestAPIClient","getVersion","params","send","exports","validateBaseUrl","validateGuestSpaceId","undefined","url","URL","hostname","protocol"],"sources":["../src/KintoneRestAPIClient.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}